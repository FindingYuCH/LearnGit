Magix.tmpl("app/views/msgbar",'<div class=message-bar> <div class=message-trigger mx-click=show data-spm-click="gostr=/tblm.88.1;locaid=de8775885"> <i class=iconfont-pub>&#xf0104;</i> </div> <div class=message-panel> <div class=hd> <a href="#" class=close mx-click=hide data-spm-click="gostr=/tblm.88.1;locaid=da3a0ef16">\u9690\u85cf</a> <h3>\u516c\u544a</h3> </div> <div class=bd> <ul> {{#list}} <li> <span class=publish-time>[{{publishTime}}]</span> <a href="#" class=title title="{{title}}" mx-click="jump{id:{{title}}}" data-spm-click="gostr=/tblm.88.1;locaid=d0fe18e00">{{title}}</a> </li> {{/list}} {{^list}} <li> \u6682\u65e0\u516c\u544a </li> {{/list}} </ul> </div> </div> </div>'),KISSY.add("app/views/msgbar",function(e,a,i,t,l,s){var n=i.all,p="pub-message-center",o=1;return a.extend({render:function(){var e=this;e.manage(s.fetchAll([{name:"get_tms_content",urlParams:{path:"/alp/union/pub/message.html",encode:"utf-8"}}],function(a){var i=a.get("data").jsonString;i=t.parse(i),i.sort(function(e,a){return e.order-a.order}),e.setViewPagelet({list:i.slice(0,5)},function(){e._component()})}))},_component:function(){var e=l.get(p);e||this._show()},_show:function(){var e=n(".message-trigger"),a=n(".message-panel");e.animate({right:-44},{duration:.35,easing:"backIn",complete:function(){a.animate({right:0},{duration:.25,easing:"easeOut"})}})},_hide:function(){var e=n(".message-trigger"),a=n(".message-panel"),i=l.get(p);a.animate({right:-330},{duration:.25,easing:"easeOut",complete:function(){e.animate({right:0},{duration:.25,easing:"easeOut"}),i||l.set(p,1,o)}})},events:{click:{show:function(e){var a=e.view;a._show()},hide:function(e){e.halt();var a=e.view;a._hide()},jump:function(e){e.halt();var a=e.view;a._hide(),a.navigate("/myunion/message_detail?id="+e.params.id)}}}})},{requires:["mxext/view","node","json","cookie","app/models/modelmanager","mxext/mmanager","app/models/model","app/models/basemodel","mxext/model","ajax","app/util/util","app/util/datepicker/datepicker","app/util/dialog/dialog","app/util/format/format","app/util/globaltip/globaltip","app/util/robot/sourceid","app/util/spmlog/spmlog","app/util/mathextend/mathextend","app/util/tooltip/tooltip","app/util/widgetds/widgetds","app/util/rank/rank","app/util/reporttip/reporttip","app/util/vcode/vcode","app/util/pagination/index","app/util/fields/fields","app/util/mouseevent/index","magix/vframe","magix/vom","magix/router","brix/gallery/datepicker/index","brix/gallery/calendar/index","brix/gallery/dialog/index","app/util/spmlog/pathmap"]});